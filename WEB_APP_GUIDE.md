# Streamlit Web应用使用说明

## 🌐 Web界面功能

煤矿采空区数据集转换工具现已支持Web界面，提供更友好的用户体验！

---

## 🚀 启动应用

### 1. 安装依赖

```bash
cd ToDataJson
pip install -r requirements.txt
```

### 2. 运行应用

```bash
streamlit run app.py
```

应用将自动在浏览器中打开：`http://localhost:8501`

---

## 📋 功能介绍

### Tab 1: 📤 数据转换

**功能**: 将CSV文件转换为JSON格式

**步骤**:
1. 输入煤矿名称（如：河西联办煤矿）
2. 上传CSV文件（可多选，最多10个）
3. 点击"🚀 转换为JSON"按钮
4. 查看转换统计
5. 点击"📥 下载JSON文件"下载结果

**特点**:
- ✅ 支持拖拽上传
- ✅ 实时显示上传文件列表
- ✅ 显示详细统计信息
- ✅ 一键下载JSON文件

### Tab 2: ✅ 数据验证

**功能**: 验证CSV和JSON数据的一致性

**步骤**:
1. 上传CSV文件（左侧）
2. 上传JSON文件（右侧）
3. 点击"🔍 验证数据"按钮
4. 查看验证结果

**特点**:
- ✅ 自动比对记录数
- ✅ 显示详细比对结果
- ✅ 高亮显示错误和警告

### Tab 3: 📖 帮助文档

**功能**: 查看使用指南和标准说明

**内容**:
- 使用指南
- 文件命名规范
- 支持的表列表
- JSON格式说明
- 注意事项

---

## 🎨 界面预览

### 主界面

```
⛏️ 煤矿采空区数据集转换工具
将CSV格式的采空区普查数据转换为JSON格式，符合KAT 22.2-2024标准

[📤 数据转换] [✅ 数据验证] [📖 帮助文档]
```

### 数据转换界面

```
煤矿名称: [河西联办煤矿_____________]

上传CSV文件
[拖拽文件到此处或点击浏览]

已上传 10 个文件
📄 河西联办煤矿-采空区基本信息.csv
📄 河西联办煤矿-采空区积水信息.csv
...

[🚀 转换为JSON]

✅ 转换成功！

总记录数: 255    表数量: 10    数据版本: 1.0.0

[📥 下载JSON文件]
```

---

## 💡 使用技巧

### 1. 批量上传

- 可以一次选择多个CSV文件
- 支持拖拽上传
- 自动识别文件类型

### 2. 文件命名

确保CSV文件遵循命名规范：
```
{煤矿名称}-{表名}.csv
```

例如：
- ✅ 河西联办煤矿-采空区基本信息.csv
- ❌ 采空区基本信息-河西联办煤矿.csv

### 3. 查看详情

点击"📊 详细统计"可以查看每个表的记录数

### 4. 验证数据

转换后建议使用"数据验证"功能检查转换是否正确

---

## ⚙️ 配置选项

### 主题配置

编辑 `.streamlit/config.toml`:

```toml
[theme]
primaryColor = "#FF4B4B"
backgroundColor = "#FFFFFF"
secondaryBackgroundColor = "#F0F2F6"
textColor = "#262730"
font = "sans serif"
```

### 服务器配置

```toml
[server]
port = 8501
address = "localhost"
maxUploadSize = 200
```

---

## 🐛 常见问题

### Q1: 应用无法启动

**A**: 检查是否安装了streamlit
```bash
pip install streamlit
```

### Q2: 文件上传失败

**A**: 检查文件大小（默认限制200MB）和文件格式（仅支持CSV）

### Q3: 转换失败

**A**: 检查：
- 文件命名是否正确
- 文件编码是否为UTF-8
- 煤矿名称是否输入正确

### Q4: 端口被占用

**A**: 更改端口
```bash
streamlit run app.py --server.port=8502
```

---

## 🔒 安全说明

### 数据隐私

- ✅ 所有数据仅在本地处理
- ✅ 不上传到任何服务器
- ✅ 临时文件自动清理

### 文件安全

- ✅ 仅接受CSV和JSON文件
- ✅ 文件大小限制
- ✅ 自动验证文件格式

---

## 📊 性能说明

### 处理能力

- 支持单个文件最大200MB
- 支持同时上传10个文件
- 转换速度：约1000条记录/秒

### 浏览器兼容性

- ✅ Chrome (推荐)
- ✅ Firefox
- ✅ Edge
- ✅ Safari

---

## 🚀 部署到云端

### Streamlit Cloud

1. 将代码推送到GitHub
2. 访问 [share.streamlit.io](https://share.streamlit.io)
3. 连接GitHub仓库
4. 选择 `app.py` 作为主文件
5. 点击部署

详见：`DEPLOYMENT.md`

---

## 📞 技术支持

如有问题，请：
- 查看帮助文档（应用内Tab 3）
- 查看 `README.md`
- 查看 `DEPLOYMENT.md`
- 提交GitHub Issue

---

**版本**: 1.0.0  
**更新日期**: 2024-12-26  
**维护单位**: 煤矿采空区普查数据标准化工作组

